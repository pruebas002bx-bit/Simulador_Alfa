<script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Animación de Scroll (Fade-in) ---
            const fadeElements = document.querySelectorAll('.fade-in');
            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });
            fadeElements.forEach(el => {
                scrollObserver.observe(el);
            });

            // --- Lógica de Navegación Activa ---
            const navLinks = document.querySelectorAll('.nav-menu a');
            const currentPage = window.location.pathname.split('/').pop();
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
            
            // --- Lógica de la Galería Lightbox (MODIFICADA) ---
            const modal = document.getElementById("lightbox-modal");
            const modalImg = document.getElementById("lightbox-image");
            const captionText = document.getElementById("lightbox-caption");
            
            // --- AÑADIDO ---
            const modalVideo = document.getElementById("lightbox-video"); // Seleccionamos el video
            
            const thumbnails = document.querySelectorAll(".lightbox-thumb"); 
            const closeModal = document.querySelector(".lightbox-close");

            thumbnails.forEach(thumb => {
                thumb.onclick = function() {
                    const isVideo = this.dataset.video === 'true'; // Comprueba si es video
                    const src = this.dataset.src || this.src;
                    
                    captionText.innerHTML = this.alt;
                    
                    if (isVideo) {
                        // Si es video: oculta imagen, muestra video y reproduce
                        modalImg.style.display = 'none';
                        modalVideo.style.display = 'block';
                        modalVideo.src = src;
                        modalVideo.play();
                    } else {
                        // Si es imagen: oculta video, muestra imagen
                        modalVideo.style.display = 'none';
                        modalVideo.src = ""; // Limpia el src del video
                        modalVideo.pause();
                        modalImg.style.display = 'block';
                        modalImg.src = src;
                    }
                    
                    modal.style.display = "flex"; 
                }
            });

            // --- MODIFICADO ---
            const closeLightbox = () => {
                modal.style.display = "none";
                
                // --- AÑADIDO ---
                // Detiene el video y limpia el src cuando se cierra el modal
                modalVideo.pause();
                modalVideo.src = "";
            }

            closeModal.onclick = closeLightbox;
            
            modal.onclick = function(e) {
                // Cierra si se hace clic fuera del contenido (imagen/video)
                if (e.target === modal) {
                    closeLightbox();
                }
            }

        });
    </script>